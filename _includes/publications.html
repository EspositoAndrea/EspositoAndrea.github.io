<h2>Publications</h2>

{% assign publications = site.data.curriculum.publications | sort: "type"  %}

{% assign current_type = publications[0].type  %}
<h3 id="{{ current_type | downcase | append: 's' }}">{{ current_type | downcase | append: 's' | capitalize }}</h3>

<ul>
    {% for entry in publications %}
        {% if entry.type != current_type %}
            </ul>
            {% assign current_type = entry.type  %}
            <h3 id="{{ current_type | downcase | append: 's' }}">{{ current_type | downcase | append: 's' | capitalize }}</h3>
            <ul>
        {% endif %}
        <li>
            <span>{{ entry.author }}</span>
            (<time datetime="{{ entry.date }}">{{ entry.date }}</time>),

            {% if entry.subtitle %}
                {% assign title = entry.title | append: '. ' | append: entry.subtitle %}
            {% else %}
                {% assign title = entry.title %}
            {% endif %}

            &ldquo;<span>{{ title }}</span>&rdquo;.

            {% if entry.publisher %}
                {% if entry.address %}
                    {% assign publisher = entry.publisher | append: ' (' | append: entry.address | append: ')' %}
                {% else %}
                    {% assign publisher = entry.publisher %}
                {% endif %}
                <span class="font-italic">{{ publisher }}</span>.
            {% endif %}

            <!-- Link to the publication -->
            {% if entry.isbn %}
                ISBN:
                <a href="https://www.google.com/search?q={{ entry.isbn }}" target="_blank">
                    <span>{{ entry.isbn }}</span>
                </a>
            {% elsif entry.doi %}
                DOI:
                <a href="https://doi.org/{{ entry.doi }}" target="_blank">
                    <span>{{ entry.doi }}</span>
                </a>
            {% endif %}
        </li>
    {% endfor %}
</ul>
